package com.superherobattle.logic;

import com.superherobattle.characters.Character;
import com.superherobattle.util.LoggerUtil;

public class Battle {

    public static void fight(Character a, Character b) {
        LoggerUtil.log("‚öîÔ∏è  Battle starts between " + a.getName() + " and " + b.getName());

        int forceA = a.countForce();
        int forceB = b.countForce();

        int protectionA = a.countProtection();
        int protectionB = b.countProtection();

        LoggerUtil.log(a.getName() + " force: " + forceA + ", protection: " + protectionA);
        LoggerUtil.log(b.getName() + " force: " + forceB + ", protection: " + protectionB);

        if (forceA == forceB) {
            LoggerUtil.log("It's a draw! No damage dealt.");
            return;
        }

        if (forceA > forceB) {
            int damage = calculateDamage(forceA, protectionB);
            b.reduceHealth(damage);
            LoggerUtil.log(a.getName() + " wins! " + b.getName() + " loses " + damage + " HP.");
        } else {
            int damage = calculateDamage(forceB, protectionA);
            a.reduceHealth(damage);
            LoggerUtil.log(b.getName() + " wins! " + a.getName() + " loses " + damage + " HP.");
        }

        LoggerUtil.log("üí• Final health: " + a.getName() + " = " + a.getHealth() + ", " + b.getName() + " = " + b.getHealth());
    }

    /**
     * –í—ã—á–∏—Å–ª—è–µ—Ç —É—Ä–æ–Ω –∫–∞–∫ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É —Å–∏–ª–æ–π –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç–æ–π,
     * –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–Ω ‚Äî 1.
     */
    private static int calculateDamage(int attackerForce, int defenderProtection) {
        int rawDamage = attackerForce - defenderProtection;
        if (rawDamage <= 0) {
            return 1; // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–Ω –≤—Å–µ–≥–¥–∞ 1
        }
        return rawDamage;
    }
}


